<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>eFootball Pack Simulator</title>
    <style>
        body { background-color: #121212; color: white; font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        /* UI ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏° */
        .header { background-color: #1e3a1e; width: 100%; max-width: 950px; padding: 20px; border-radius: 10px; margin-bottom: 15px; text-align: center; font-size: 24px; font-weight: bold; border: 1px solid #2d5a27; }
        .settings-bar { background-color: #222; width: 100%; max-width: 950px; padding: 15px; border-radius: 10px; display: flex; justify-content: center; align-items: center; gap: 15px; margin-bottom: 20px; border: 1px solid #333; }
        .btn-green { background-color: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .btn-blue { background-color: #17a2b8; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }

        /* ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞ Epic ‡πÉ‡∏ô‡∏ï‡∏π‡πâ */
        .tracker-container { background: #1a1a1a; padding: 15px; border-radius: 10px; width: 100%; max-width: 950px; margin-bottom: 20px; border: 1px solid #444; text-align: center; }
        .tracker-grid { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
        .tracker-item { width: 70px; height: 100px; position: relative; border: 1px solid #555; border-radius: 5px; overflow: hidden; }
        .tracker-item img { width: 100%; height: 100%; object-fit: cover; }
        .tracker-item.out img { filter: grayscale(1); opacity: 0.4; }
        .tracker-item.out::after { content: "OUT"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #ff4444; font-weight: bold; font-size: 16px; text-shadow: 1px 1px 3px black; }

        .stats { display: flex; gap: 50px; font-size: 24px; font-weight: bold; color: #ffcc00; margin-bottom: 20px; }
        
        /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î 1 ‡πÉ‡∏ö ‡πÅ‡∏•‡∏∞ 10 ‡πÉ‡∏ö */
        .controls { display: flex; gap: 15px; margin-bottom: 30px; }
        .btn-draw-1 { background-color: #f8f9fa; color: black; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 18px; }
        .btn-draw-10 { background-color: #ffcc00; color: black; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 18px; }

        /* ‡∏Å‡∏£‡∏≠‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏° */
        .result-box { border: 2px dashed #444; border-radius: 15px; padding: 25px; width: 95%; max-width: 1400px; display: none; margin-bottom: 30px; background: rgba(0,0,0,0.2); overflow-x: auto; }
        .card-grid { display: grid; gap: 12px; min-width: 1250px; }
        .card { background-color: #2a2a2a; border-radius: 10px; height: 240px; border: 1px solid #333; overflow: hidden; position: relative; }
        .card-img { width: 100%; height: 100%; object-fit: cover; }
        .card.epic { border: 2px solid #ffcc00; box-shadow: 0 0 15px rgba(255, 204, 0, 0.6); }

        /* ‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏û (Modals) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏Å‡∏ö‡∏≤‡∏ó‡∏õ‡∏¥‡∏î */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { 
            background: #1a1a1a; border: 2px solid #ffcc00; border-radius: 15px; 
            padding: 30px; text-align: center; box-shadow: 0 0 30px #ffcc0066; 
            width: 90%; max-width: 1100px; max-height: 85vh; 
            position: relative; overflow-y: auto; 
        }
        .close-x { position: absolute; top: 15px; right: 20px; font-size: 35px; font-weight: bold; color: #ffcc00; cursor: pointer; line-height: 1; }
        .close-x:hover { color: #fff; }

        .history-box { border: 1px solid #444; border-radius: 8px; margin-bottom: 15px; padding: 15px; background: #222; text-align: left; }
        .history-row { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 10px; }
        .mini-card { flex: 0 0 90px; height: 130px; border-radius: 5px; overflow: hidden; }
    </style>
</head>
<body>

    <div id="congratsModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 450px;">
            <span class="close-x" onclick="closeModal('congratsModal')">&times;</span>
            <h2 style="color: #ffcc00;">‚ú® ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‚ú®</h2>
            <p id="epicPlayerName" style="font-size: 20px;"></p>
            <button class="btn-green" onclick="closeModal('congratsModal')">‡∏ï‡∏Å‡∏•‡∏á</button>
        </div>
    </div>

    <div id="historyModal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-x" onclick="closeModal('historyModal')">&times;</span>
            <h2 style="color: #ffcc00; margin-top: 0;">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
            <div id="historyContainer"></div>
        </div>
    </div>

    <div class="header">‚öΩ eFootball Pack Simulator</div>

    <div class="settings-bar">
        <span>üí∞ ‡∏ó‡∏≠‡∏á:</span>
        <input type="number" id="inputGold" value="15000" style="padding: 8px; width: 100px; border-radius: 5px; border: none; text-align: center;">
        <button class="btn-green" onclick="setGold()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏π‡πâ</button>
        <button class="btn-blue" onclick="openHistory()">üìã ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°</button>
    </div>

    <div class="tracker-container">
        <strong style="color: #ffcc00;">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞ Epic ‡πÉ‡∏ô‡∏ï‡∏π‡πâ:</strong>
        <div id="epicTracker" class="tracker-grid"></div>
    </div>

    <div class="stats">
        <div>üü° ‡∏ó‡∏≠‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="goldDisplay">15,000</span></div>
        <div>üì¶ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô‡∏ï‡∏π‡πâ: <span id="remain">250</span> / 250</div>
    </div>

    <div class="controls">
        <button class="btn-draw-1" onclick="draw(1)">‡πÄ‡∏õ‡∏¥‡∏î 1 ‡πÉ‡∏ö (100)</button>
        <button class="btn-draw-10" onclick="draw(10)">‡πÄ‡∏õ‡∏¥‡∏î 10 ‡πÉ‡∏ö (900)</button>
    </div>

    <div id="resultArea" class="result-box">
        <div id="cardGrid" class="card-grid"></div>
    </div>

    <script>
        let gold = 15000;
        let box = [];
        let drawCount = 0;

        const specialPlayersData = [
            { name: "L. Messi", img: "messi.jpg", type: 'epic' },
            { name: "J. Cruyff", img: "cruyff.jpg", type: 'epic' },
            { name: "F. Baresi", img: "baresi.jpg", type: 'epic' },
            { name: "E. Cantona", img: "cantona.jpg", type: 'epic' },
            { name: "R. Carlos", img: "carlos.jpg", type: 'epic' },
            { name: "D. Bergkamp", img: "bergkamp.jpg", type: 'epic' },
            { name: "J. O'Shea", img: "oshea.jpg", type: 'epic' }
        ];

        function setGold() {
            gold = parseInt(document.getElementById('inputGold').value) || 0;
            drawCount = 0;
            resetBox();
        }

        function resetBox() {
            box = specialPlayersData.map(p => ({...p}));
            while(box.length < 250) { box.push({ name: "Salt", img: "standard.jpg", type: 'standard' }); }
            updateTracker();
            updateUI();
            document.getElementById('resultArea').style.display = "none";
            document.getElementById('historyContainer').innerHTML = "";
        }

        function updateTracker() {
            const tracker = document.getElementById('epicTracker');
            tracker.innerHTML = "";
            specialPlayersData.forEach(p => {
                const isOut = !box.some(item => item.name === p.name);
                const div = document.createElement('div');
                div.className = 'tracker-item' + (isOut ? ' out' : '');
                div.innerHTML = `<img src="${p.img}" onerror="this.src='https://placehold.co/70x100?text=?'}">`;
                tracker.appendChild(div);
            });
        }

        function updateUI() {
            document.getElementById('goldDisplay').innerText = gold.toLocaleString();
            document.getElementById('remain').innerText = box.length;
        }

        function draw(count) {
            let cost = (count === 1) ? 100 : 900;
            if (gold < cost || box.length < count) return alert("‡∏ó‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏û‡∏≠!");
            gold -= cost;
            drawCount++;
            let results = [];
            let epicsFound = [];

            for (let i = 0; i < count; i++) {
                let idx = Math.floor(Math.random() * box.length);
                let p = box.splice(idx, 1)[0];
                results.push(p);
                if(p.type === 'epic') epicsFound.push(p.name);
            }

            const area = document.getElementById('resultArea');
            const grid = document.getElementById('cardGrid');
            area.style.display = "block";
            grid.innerHTML = "";
            grid.style.gridTemplateColumns = (count === 1) ? "180px" : "repeat(10, 1fr)";
            grid.style.justifyContent = (count === 1) ? "center" : "start";

            results.forEach(p => {
                const div = document.createElement('div');
                div.className = 'card' + (p.type === 'epic' ? ' epic' : '');
                div.innerHTML = `<img src="${p.img}" class="card-img" onerror="this.src='https://placehold.co/180x240?text=No+Img'}">`;
                grid.appendChild(div);
            });

            if(epicsFound.length > 0) {
                document.getElementById('epicPlayerName').innerText = "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ: " + epicsFound.join(", ");
                document.getElementById('congratsModal').style.display = 'flex';
            }

            updateTracker();
            addHistory(drawCount, cost, results);
            updateUI();
        }

        function openHistory() { document.getElementById('historyModal').style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        function addHistory(num, cost, players) {
            const container = document.getElementById('historyContainer');
            const boxDiv = document.createElement('div');
            boxDiv.className = 'history-box';
            boxDiv.innerHTML = `<span style="color:#ffcc00; font-weight:bold;">‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà ${num} (‡πÉ‡∏ä‡πâ ${cost} ‡∏ó‡∏≠‡∏á)</span>`;
            const row = document.createElement('div');
            row.className = 'history-row';
            players.forEach(p => {
                const mini = document.createElement('div');
                mini.className = 'mini-card' + (p.type === 'epic' ? ' epic' : '');
                mini.innerHTML = `<img src="${p.img}" style="width:100%; height:100%; object-fit:cover;" onerror="this.src='https://placehold.co/90x130?text=Error'}">`;
                row.appendChild(mini);
            });
            boxDiv.appendChild(row);
            container.insertBefore(boxDiv, container.firstChild);
        }

        resetBox();
    </script>
</body>
</html>


